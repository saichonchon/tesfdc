<apex:page standardController="qbdialer__SeekInitiative__c"
    extensions="qbdialer.SeekInitiative"
    tabStyle="is_links__tab"
    title="Seek Initiative: {!qbdialer__SeekInitiative__c.Name}"
    id="SeekInitiative">
<script type="text/javascript"> __jQuery = null;if(typeof(jQuery) != "undefined") __jQuery = jQuery; jQuery = null; </script>
<script type="text/javascript" src="{!URLFOR($Resource.c2c_resources, '/lib/jquery.min.js')}"></script>
<script type="text/javascript" src="{!URLFOR($Resource.c2c_resources, '/lib/jquery-migrate.min.js')}"></script>
<script type="text/javascript" src="{!URLFOR($Resource.c2c_resources, '/lib/jquery-ui.min.js')}"></script>
<script type="text/javascript" src="{!URLFOR($Resource.c2c_resources, '/profile_perms.js')}"></script>
<style type="text/css">
    @import url('/resource/qbdialer__c2c_resources/20170424025435/style/themes/smoothness/jquery-ui.min.css');
</style>
<div class="lightning_css"> 
<div id="clone_dialog" style="display: none" >
  <div class="bd">
      <apex:form >
        <apex:pageBlock >
          <apex:pageBlockSection columns="1">
          		<div id="clone_form">
            	   <table><tbody>
	                     <tr>
	                         <td class="labelCol requiredInput"><label>Name:</label></td>
	                         <td class="dataCol" noWrap="true">
		                         <div class="requiredInput">
		                        	 <div class="requiredBlock"></div><input type="text" name="new_name" id="new_name" />
		                        	 <div id="clone_name_error" style="display:none" class="errorMsg"><strong>Error:</strong> You must enter a value</div>
		                       	 </div>
		                    </td>
	                     </tr>
                    </tbody></table>
                </div>
                <div id="clone_in_progress" style="display:none;font-weight: bold;text-align:center;width:100%">
                    <img src="https://qbdialer.na6.visual.force.com/img/loading.gif"/> Cloning . . .
                </div>
          </apex:pageBlockSection>
        </apex:pageBlock>
        <div style="text-align: right;"></div>
      </apex:form>
  </div>
</div>
    <script type="text/javascript">
        var previousOnload = window.onload;
        window.onload = function() {
            if (previousOnload) {
                previousOnload();
            }
            
            onLoadCriteria();
            getLocalPresenceData();
        }

        function buildRoleMap(){
        	document.getElementById('duel').style.display = document.getElementById("SeekInitiative:editPage:fshare").value == 'fsharegroups' ? 'block' : 'none';
            var l = document.getElementById('{!$Component.SeekInitiative.role_option_list}');
            eval('var items = '+l.innerHTML);
            var options = [];
            var selected = [];
            for (var i = 0; i < items.length; i++) {
                 var group_name = items[i].group_name;//document.getElementById(id+":group_name").innerHTML;
                 var label      = items[i].label;//document.getElementById(id+":label").innerHTML;
                 var role_id    = items[i].id;//document.getElementById(id+":id").innerHTML;
                 var sort_data  = items[i].sort_data;//document.getElementById(id+":sort_data").innerHTML;
                 if (items[i].selected == '1') {
                     selected[selected.length] = role_id;
                     if (existingSelduel_select_1.options.length == 1 && existingSelduel_select_1.options[0].value == "") {
                         existingSelduel_select_1.options[0] = null;
                     }
                     
                     existingSelduel_select_1.options[existingSelduel_select_1.options.length] = new Option(label, role_id);
                 }
                 
                 options[options.length] = [group_name, label, role_id, sort_data.toLowerCase(), existingSelduel_select_1];
            }
            
            duel_select_0Var.addOptions(false, options);
            existingSelduel_select_0.options[0] = new Option('--None--','');
            duel_select_0Var.filter();
        }
        
        var current_filter_number = 0;
        var redirect_on_save = true;
        function onLoadCriteria() {
            buildRoleMap();
            showHideNeuralytics();
            showHideTimeblocks();
        }
        
        function showHideNeuralytics() {
            var user_subdomain = '{!JSENCODE($User.is_subdomain__c)}';
            qbjq.ajax({
                url: 'https://' + user_subdomain + '.insidesales.com/do=noauth/check_license?key=neur',
                dataType: 'jsonp',
                success: function (data) {
                    document.getElementById('SeekInitiative:editPage:neuralytics_panel').style.display = data.message ? 'block' : 'none';
                }
            });
        }
        
        function showHideTimeblocks(){
            document.getElementById('{!$Component.SeekInitiative.editPage.timeblock_queries}').style.display        = getSeekInitiativeId() == ''?'none':'';
        }
        
        function getSelectedQBRoles(){
            if(!getSeekInitiativeId()){
                document.getElementById("{!$Component.SeekInitiative.editPage.query_name_error}").style.display = "";
                document.getElementById("{!$Component.SeekInitiative.editPage.query_name}").style.borderWidth = "2px";
                document.getElementById("{!$Component.SeekInitiative.editPage.query_name}").style.borderColor = "#cc0000";
                return;
            }
            
            showHideTimeblocks();
            if(existingSelduel_select_1.options.length > 0 && existingSelduel_select_1.options[0].value != ""){
                var options = "";
                for(var i = 0; i < existingSelduel_select_1.options.length; i++){
                    if(options != "")
                        options += ",";
                    existingSelduel_select_1.options[i].selected = false;
                    options += existingSelduel_select_1.options[i].value;
                }
                
                saveSelectedQBRoles(options);
            }
            else{
                if(!quick_save && redirect_on_save){
                    redirectToView();
                }
                else{
                    redirect_on_save = true;
                }
            }
        }
        
        var quick_save = true;
        function hideStatuses(){
            document.getElementById('roleSaveStatus.stop').style.display  = 'none';
            document.getElementById('querySaveStatus.stop').style.display = 'none';
        }
        
        function redirectToView(){
            var id = getSeekInitiativeId();
            if(id)
                top.window.location.href = '/apex/Seek_Initiative_List_View';//+id;
        }
        
        function getSeekInitiativeId(){
            var id = document.getElementById('{!$Component.SeekInitiative.editPage.sf_seek_initiative_id}').innerHTML;
            id = id.replace(/[^0-9a-zA-z]/g, '');
            if(id != ""){
                if(id.length == 18){
                    id = id.substr(0, 15);
                }
                return id;
            }
            else return false;
        }
        
        function unselectRoles(){
            var dd = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_0}');
            var i;
            for(i = 0; i < dd.options.length; i++) dd.options[i].selected = false;
            dd = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_1}');
            for(i = 0; i < dd.options.length; i++) dd.options[i].selected = false;
        }
        
        function editTimeblock(id) {
            window.open('/'+id+'/e', '', 'scrollbars=1,resizeable=1');
        }
        
        function moveRight(){
            var src_dd = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_1}');
            var dst_dd = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_0}');
            if (!src_dd.disabled && !dst_dd.disabled)
            {
                duel_select_0Var.beforeMoveRight();
                window.editPage_DLBEInstance.instMoveOption(dst_dd, src_dd,'--None--', [], null,'--None--',false,null,'editPage_duel_errorMsg');
            }
        }
        
        function moveLeft(){
            var src_dd = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_0}');
            var dst_dd = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_1}');
            if (!src_dd.disabled && !dst_dd.disabled) {
                window.editPage_DLBEInstance.instMoveOption(dst_dd, src_dd,'--None--', [], null,'--None--',false,null,'editPage_duel_errorMsg');duel_select_0Var.moveLeft();
            }
        }
        function cloneList() {
        	qbjq('#clone_dialog').dialog({
        		modal: false,
        		resizable: false,
                draggable: false,
        		title: "Enter a name for the new list",
		        buttons: {
		            "Save & Edit New List": function() { 
		                 doClone();
		            }, 
		            "Cancel": function() {
        				qbjq('#clone_name_error').hide(); 
		                qbjq(this).dialog("close"); 
		            } 
		        }
   			});
        }
        function doClone() {
        	var n = qbjq('#new_name').val().trim();
        	if(n == '') {
        		qbjq('#clone_name_error').show();
        	} else {
	            qbjq("#clone_in_progress").show();
	            qbjq("#clone_form").hide();
        		qbjq('#clone_name_error').hide();
        		qbjq('.ui-dialog-buttonpane').hide();
        		qbjq('.ui-dialog-titlebar').hide();
        		cloneSeekList(n);
        	}
        }
        function cloneComplete() {
        	var new_id = qbjq("#SeekInitiative\\:cloned_id").html();
        	top.window.location = "/"+new_id+"/e";
        	
        }
        function lp_blocks_response(response) {
            var selected_val = qbjq(".bucket_id").val();
            var first_item = false;
            if (response.lp_able) {
                qbjq('#local_presence_block_select').html('');
                for (var i=0; i < response.blocks.length; i++) {
                    if (qbjq(".bucket_id").val() == response.blocks[i].id) {
                        selected_val = response.blocks[i].id;
                        qbjq('.bucket_id').val(selected_val);
                    }
                    if (first_item === false) {
                        first_item = response.blocks[i].id;
                    }
                    qbjq('#local_presence_block_select').append(qbjq('<option value="'+response.blocks[i].id+'">'+response.blocks[i].label+'</option>'));
                }   
                if (first_item !== false && !qbjq('.bucket_id').val()) {
                    qbjq('.bucket_id').val(first_item)
                }
                qbjq('#local_presence_block_select').val(qbjq('.bucket_id').val()); 
            } else {
                qbjq('#SeekInitiative\\:editPage\\:caller_id_type option[value="LocalPresence"]').remove();
            }
        }
        function getLocalPresenceData() {
            var script_element   = document.createElement('script');
            var user_oauth_token = '{!JSENCODE($User.is_token__c)}';
            var user_subdomain   = '{!JSENCODE($User.is_subdomain__c)}';
            script_element.type  = 'text/javascript';
            script_element.src   = 'https://'+user_subdomain+'.insidesales.com/admin/salesforce/local_presence_blocks?token='+user_oauth_token;
            document.body.appendChild(script_element);
        }

		qbjq = jQuery.noConflict();//store internal copy so it won't get overwritten elsewhere
		jQuery = __jQuery;
		//TODO -- namespace pd (ie qbdialer__pd)
    </script>
<apex:variable var="uiTheme" value="lightningDesktop" rendered="{!$User.UIThemeDisplayed == 'Theme4d'}">
    <style> 
        .lightning_css {
            padding-left:5px;
        }
    </style>
</apex:variable>  
    <div style="margin-bottom: 5px">
        <a href="/apex/qbdialer__is_links">InsideSales</a>
        <strong>&gt;</strong>
        <a href="/apex/qbdialer__Seek_Initiative_List_View">Seek Lists</a>
        <strong>&gt;</strong>
        Seek Initiative
    </div>
    <apex:pageMessages id="pageMsgs"/>
	<apex:outputPanel style="display:none" >
		<pre>encoded options: <apex:outputText id="role_option_list" value="{!RoleOptions}"/></pre>
	</apex:outputPanel>
	<apex:outputPanel style="display:none" >
		cloned_id: <apex:outputText id="cloned_id"        value="{!cloned_id}"/>
		cloned_from: <apex:outputText id="cloned_from"        value="{!cloned_from}"/>
	</apex:outputPanel>
    <div class="bPageBlock bEditBlock secondaryPalette">
        <apex:form id="editPage">
            <apex:outputPanel id="dq_data" style="display:none">
                <apex:outputText id="sf_seek_initiative_id"            value=" {!SeekInitiativeId}"/>
                <apex:outputText id="sf_seek_initiative_name"          value=" {!SeekInitiativeName}"/>
                <apex:outputText id="sf_seek_initiative_limit_calls_to"value=" {!LimitCallsTo}"/>
            </apex:outputPanel>
            <div class="pbHeader">
                <table width="100%"><tbody>
                    <tr><td class="pbTitle" align="center">
                        <apex:commandButton action="{!edit}"   value=" Edit "   title=" Edit "  rendered="{!ShowEditButton}"/>
                        <apex:outputPanel rendered="{!can_clone}" >
                        	<input type="button" class="btn" title=" Clone " value=" Clone " onclick="cloneList()"/>
                        </apex:outputPanel>
                        <apex:commandButton action="{!delete}" value=" Delete " title=" Delete" rendered="{!ShowEditButton}" onclick="return window.confirm('Are you sure?');"/>
                    </td></tr>
                </tbody></table>
            </div>
            <div class="pbBody">
                <div class="pbSubblock">
                    <div class="pbSubheader first tertiaryPalette"><h3>Initiative&nbsp;Information</h3></div>
                    <div class="pbSubbody">
                        <table><tbody>
                            <tr>
                                <td class="labelCol requiredInput"><label>Name:</label></td>
                                <td class="dataCol"><apex:outputField value="{!qbdialer__SeekInitiative__c.name}"/></td>
                                <td class="labelCol"><label>Caller ID:</label></td>
                                <td class="dataCol">
                                    <apex:selectList id="caller_id_type" size="1" title="Caller ID" value="{!qbdialer__SeekInitiative__c.qbdialer__CallerIdType__c}" disabled="true"> 
                                        <apex:selectOptions value="{!CallerIdOptions}"/>
                                    </apex:selectList>
                                    <span id="caller_id_span" style="display: {!IF(IsCustomCallerId,'inline','none')}">
                                        <apex:outputField value="{!qbdialer__SeekInitiative__c.qbdialer__CallerID__c}"/>
                                    </span>
                                    <span id="local_presence_span" style="display: {!IF(IsLocalPresenceCallerId,'inline','none')}">
                                        <select id="local_presence_block_select" disabled="true"></select>
                                        <span style="display: none;"><apex:inputField id="bucket_id" styleclass="bucket_id" value="{!qbdialer__SeekInitiative__c.qbdialer__Local_Presence_Bucket__c}" /></span>
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td class="labelCol"><label>Limit Calling Times:</label></td>
                                <td class="dataCol">
                                    <apex:outputPanel rendered="{!IsSimpleSeek}">
                                        <apex:selectList disabled="true" size="1" title="Limit Calling Hours" value="{!qbdialer__SeekInitiative__c.qbdialer__CallingHours__c}">
                                            <apex:selectOption itemLabel="Business Hours" itemValue="Business Hours"/>
                                            <apex:selectOption itemLabel="Consumer Hours" itemValue="Consumer Hours"/>
                                            <apex:selectOption itemLabel="None" itemValue="None"/>
                                        </apex:selectList>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!NOT(IsSimpleSeek)}">
                                        <apex:inputCheckbox disabled="true" id="LimitCallingTimes" value="{!qbdialer__SeekInitiative__c.qbdialer__LimitCallingTimes__c}" />
                                        <apex:selectList id="call_start_time" disabled="true" size="1" title="Call Start Time" value="{!qbdialer__SeekInitiative__c.qbdialer__StartTime__c}">
                                            <apex:selectOption itemLabel="12am" itemValue="00:00"/>
                                            <apex:selectOption itemLabel="1am"  itemValue="01:00"/>
                                            <apex:selectOption itemLabel="2am"  itemValue="02:00"/>
                                            <apex:selectOption itemLabel="3am"  itemValue="03:00"/>
                                            <apex:selectOption itemLabel="4am"  itemValue="04:00"/>
                                            <apex:selectOption itemLabel="5am"  itemValue="05:00"/>
                                            <apex:selectOption itemLabel="6am"  itemValue="06:00"/>
                                            <apex:selectOption itemLabel="7am"  itemValue="07:00"/>
                                            <apex:selectOption itemLabel="8am"  itemValue="08:00"/>
                                            <apex:selectOption itemLabel="9am"  itemValue="09:00"/>
                                            <apex:selectOption itemLabel="10am" itemValue="10:00"/>
                                            <apex:selectOption itemLabel="11am" itemValue="11:00"/>
                                            <apex:selectOption itemLabel="12pm" itemValue="12:00"/>
                                            <apex:selectOption itemLabel="1pm"  itemValue="13:00"/>
                                            <apex:selectOption itemLabel="2pm"  itemValue="14:00"/>
                                            <apex:selectOption itemLabel="3pm"  itemValue="15:00"/>
                                            <apex:selectOption itemLabel="4pm"  itemValue="16:00"/>
                                            <apex:selectOption itemLabel="5pm"  itemValue="17:00"/>
                                            <apex:selectOption itemLabel="6pm"  itemValue="18:00"/>
                                            <apex:selectOption itemLabel="7pm"  itemValue="19:00"/>
                                            <apex:selectOption itemLabel="8pm"  itemValue="20:00"/>
                                            <apex:selectOption itemLabel="9pm"  itemValue="21:00"/>
                                            <apex:selectOption itemLabel="10pm" itemValue="22:00"/>
                                            <apex:selectOption itemLabel="11pm" itemValue="23:00"/>
                                        </apex:selectList>
                                        <apex:selectList id="call_end_time" disabled="true" size="1" title="Call End Time" value="{!qbdialer__SeekInitiative__c.qbdialer__EndTime__c}">
                                            <apex:selectOption itemLabel="12am" itemValue="00:00"/>
                                            <apex:selectOption itemLabel="1am"  itemValue="01:00"/>
                                            <apex:selectOption itemLabel="2am"  itemValue="02:00"/>
                                            <apex:selectOption itemLabel="3am"  itemValue="03:00"/>
                                            <apex:selectOption itemLabel="4am"  itemValue="04:00"/>
                                            <apex:selectOption itemLabel="5am"  itemValue="05:00"/>
                                            <apex:selectOption itemLabel="6am"  itemValue="06:00"/>
                                            <apex:selectOption itemLabel="7am"  itemValue="07:00"/>
                                            <apex:selectOption itemLabel="8am"  itemValue="08:00"/>
                                            <apex:selectOption itemLabel="9am"  itemValue="09:00"/>
                                            <apex:selectOption itemLabel="10am" itemValue="10:00"/>
                                            <apex:selectOption itemLabel="11am" itemValue="11:00"/>
                                            <apex:selectOption itemLabel="12pm" itemValue="12:00"/>
                                            <apex:selectOption itemLabel="1pm"  itemValue="13:00"/>
                                            <apex:selectOption itemLabel="2pm"  itemValue="14:00"/>
                                            <apex:selectOption itemLabel="3pm"  itemValue="15:00"/>
                                            <apex:selectOption itemLabel="4pm"  itemValue="16:00"/>
                                            <apex:selectOption itemLabel="5pm"  itemValue="17:00"/>
                                            <apex:selectOption itemLabel="6pm"  itemValue="18:00"/>
                                            <apex:selectOption itemLabel="7pm"  itemValue="19:00"/>
                                            <apex:selectOption itemLabel="8pm"  itemValue="20:00"/>
                                            <apex:selectOption itemLabel="9pm"  itemValue="21:00"/>
                                            <apex:selectOption itemLabel="10pm" itemValue="22:00"/>
                                            <apex:selectOption itemLabel="11pm" itemValue="23:00"/>
                                        </apex:selectList>
                                    </apex:outputPanel>
                                </td>
                                <apex:outputPanel rendered="{!NOT(IsSimpleSeek)}">
                                    <td class="labelCol" style="white-space: nowrap;"><label>Time Between Calls (minutes):</label></td>
                                    <td class="dataCol"><apex:outputField value="{!qbdialer__SeekInitiative__c.qbdialer__TimeBetweenCalls__c}"/></td>
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!IsSimpleSeek}">
                                    <td class="labelCol" style="white-space: nowrap;"><label>Time Between Calls:</label></td>
                                    <td class="dataCol">
                                        <apex:selectList size="1" disabled="true" title="Time Between Calls" value="{!qbdialer__SeekInitiative__c.qbdialer__TimeBetweenCalls__c}">
                                            <apex:selectOption itemLabel="1 Hour" itemValue="60.0"/>
                                            <apex:selectOption itemLabel="2 Hours" itemValue="120.0"/>
                                            <apex:selectOption itemLabel="5 Hours" itemValue="300.0"/>
                                            <apex:selectOption itemLabel="1 Day" itemValue="1440.0"/>
                                            <apex:selectOption itemLabel="2 Days" itemValue="2880.0"/>
                                            <apex:selectOption itemLabel="4 Days" itemValue="5760.0"/>
                                            <apex:selectOption itemLabel="6 Days" itemValue="8640.0"/>
                                            <apex:selectOption itemLabel="8 Days" itemValue="11520.0"/>
                                            <apex:selectOption itemLabel="30 Days" itemValue="43200.0"/>
                                        </apex:selectList>
                                    </td>
                                </apex:outputPanel>
                            </tr>
                            <tr>
                                <apex:outputpanel rendered="{!NOT(IsSimpleSeek)}">
                                    <td class="labelCol requiredInput"><label>Dialer Panel:</label></td>
                                    <td class="dataCol">
                                        <apex:selectList id="default_dialer_panel_id" size="1" title="Dialer_Panel" value="{!DefaultDialerPanel}" disabled="true"> 
                                            <apex:selectOptions value="{!DialerPanelOptions}"/>
                                        </apex:selectList>
                                    </td>
                                </apex:outputpanel>
                            </tr>
                        </tbody></table>
                    </div>
                </div>
                <apex:outputPanel id="neuralytics_panel" style="display: none">
                    <div class="pbSubblock">
                        <div class="pbSubheader tertiaryPalette">
                            <h3>Neuralytics<sup><apex:outputText value="&reg;" escape="false" /></sup></h3>
                        </div>
                        <div class="pbSubbody">
                            <table border="0" cellSpacing="0" cellPadding="0"><tbody>
                                <tr>
                                    <td class="labelCol"><label>Neural Sort:</label></td>
                                    <td class="dataCol">
                                        <apex:selectList id="neuralytics_sort" size="1" title="Smart Sort" disabled="true" style="width:123px" value="{!qbdialer__SeekInitiative__c.qbdialer__SmartSort__c}">
                                            <apex:selectOption itemLabel="On"  itemValue="On" />
                                            <apex:selectOption itemLabel="Off" itemValue="Off"/>
                                        </apex:selectList>
                                    </td>
                                </tr>
                            </tbody></table>
                        </div>
                    </div>
                </apex:outputPanel>
                <div class="pbSubblock">
                    <div class="pbSubheader tertiaryPalette"><h3>Email Settings</h3></div>
                    <div class="pbSubbody">
                        <table><tbody>
                            <tr><td class="labelCol" style="text-align:left">
                                <apex:inputCheckbox id="use_salesforce_email_templates" disabled="true" value="{!qbdialer__SeekInitiative__c.qbdialer__UseSalesforceEmailTemplates__c}" />
                                <label for="{!$Component.SeekInitiative.editPage.use_salesforce_email_templates}">Use Salesforce Email Templates</label>
                                <div style="width: 700px; display:{!IF(SeekInitiative__c.UseSalesforceEmailTemplates__c, 'block', 'none')};" id="email_folder_panel">
                                    <br/>
									<div style="float: left; text-align: center;">
										<span style="font-weight: bold">Selected Email Folders</span><br/>
										<select id="selectedEmailFolders" multiple="true" disabled="true" size="8" style="width: 200px; height: 150px;">
                                            <apex:repeat value="{!SelectedEmailFolderOptions}" var="option">
                                                <option value="{!option.value}">{!option.label}</option>
                                            </apex:repeat>
										</select>
                                        <apex:outputText value="{!qbdialer__SeekInitiative__c.qbdialer__EmailFolders__c}" rendered="false"/>
									</div> 
								</div>
                            </td></tr>
                        </tbody></table>
                    </div>
                </div>
                <div class="pbSubblock">
                    <div class="pbSubheader tertiaryPalette"><h3>Assign Users</h3></div>
                    <div class="pbSubbody">
                        <table><tbody>
                            <tr>
                                <td class="labelCol"><label>Grant List Access:</label></td>
                                <td>
                                    <apex:selectList size="1" disabled="true" id="fshare" value="{!qbdialer__SeekInitiative__c.qbdialer__Attendees__c}" onclick="SfdcElement.prototype.setDisplayElementsById(['duel'], document.getElementById('SeekInitiative:editPage:fshare') == 'fsharegroups';">
                                        <apex:selectOption id="fsharefsharenone"   onclick="SfdcElement.prototype.setDisplayElementsById(['duel'], false);" itemValue="fsharenone"   itemLabel="Visible only to me"/>
                                        <apex:selectOption id="fsharefshareall"    onclick="SfdcElement.prototype.setDisplayElementsById(['duel'], false);" itemValue="fshareall"    itemLabel="Visible to all users"/>
                                        <apex:selectOption id="fsharefsharegroups" onclick="SfdcElement.prototype.setDisplayElementsById(['duel'], true);"  itemValue="fsharegroups" itemLabel="Visible to certain groups of users"/>
                                    </apex:selectList>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <div style="display: block" id="duel" class="duelingListBox">
                                        <div style="display: none" id="editPage_duel_errorMsg" class="errorMsg">&nbsp;</div>
                                        <div style="display: none">
                                            <label for="sharing_search">Search:</label>&nbsp;
                                            <select id="sharing_search" title="Group Type" onchange="duel_select_0Var.filter()" name="sharing_search" disabled="true">
                                                <!--<option value=R>Public Groups</OPTION>-->
                                                <option selected="selected" value="A">Roles</option>
                                                <option value="D">Roles and Subordinates</option>
                                                <option value="U">Specific Users</option>
                                            </select>&nbsp;&nbsp;
                                            <label for="searchValue_sharing_search">for:</label>&nbsp;
                                            <input onkeydown="return duel_select_0Var.handleKeyDown(event);" onpropertychange="duel_select_0Var.handlePropertyChange();" id="searchValue_sharing_search" maxlength="80" name="searchValue_sharing_search"/>&nbsp;
                                            <input id="go_duel_select_0Var" class="btn" title="Find" onclick="duel_select_0Var.doSearch();" value=" Find " type="button" name="go_duel_select_0"/><br/>
                                            <div style="visibility: hidden;" id="error_duel_select_0" class="errorMsg"></div>
                                        </div>
                                        <table class="layout"><tbody>
                                            <tr>
                                                <td class="selectCell" style="display: none">
                                                    <div class="selectTitle"><label for="duel_select_0">Available</label></div>
                                                    <apex:selectList id="duel_select_0" size="14" multiselect="true">
                                                        <apex:selectOption itemLabel="--None--" itemValue=""/>
                                                        <!-- <apex:selectOptions value="{!RoleOptions}"/> -->
                                                    </apex:selectList>
                                                </td>
                                                <td class="buttonCell" style="display: none">
                                                    <div class="text">Add</div>
                                                    <div class="text"><a id="duel_select_0_right" href="javascript:moveRight()"><img class="rightArrowIcon" title="Add" alt="Add" src="/s.gif"/></a></div>
                                                    <div class="text"><a id="duel_select_0_left" href="javascript:moveLeft()"><img class="leftArrowIcon" title="Remove" alt="Remove" src="/s.gif"/></a></div>
                                                    <div class="duelingText">Remove</div>
                                                </td>
                                                <td class="selectCell">
                                                    <div class="selectTitle"><label for="duel_select_1">Selected</label></div>
                                                    <apex:selectList id="duel_select_1" size="14" multiselect="true" disabled="true">
                                                        <apex:selectOption itemValue="" itemLabel="--None--"/>
                                                    </apex:selectList>
                                                </td>
                                            </tr>
                                        </tbody></table>
                                        <script type="text/javascript">
                                            var duel_select_0Var = new SelectFilterElement('sharing_search', 'R', '{!$Component.SeekInitiative.editPage.duel_select_0}', '', '{!$Component.SeekInitiative.editPage.duel_select_1}', 100, true);
                                            var existingSelduel_select_1 = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_1}');
                                            var existingSelduel_select_0 = document.getElementById('{!$Component.SeekInitiative.editPage.duel_select_0}');
                                            window.editPage_DLBEInstance=new DuelingListBoxesElement(['{!$Component.SeekInitiative.editPage.duel_select_0}','{!$Component.SeekInitiative.editPage.duel_select_1}'],'editPage_duel_errorMsg');
                                            //SfdcElement.prototype.setDisplayElementsById(['duel'], false);
                                        </script>
                                    </div>
                                </td>
                            </tr>
                        </tbody></table>
                    </div>
                </div>
                <div class="pbSubblock" style="display:{!IF(IsSimpleSeek,'none','block')}">
                    <div class="pbSubheader tertiaryPalette"><h3>Callback Settings</h3></div>
                    <div class="pbSubbody">
                        <div><strong>Receiving Callbacks:</strong></div>
                        <apex:inputCheckbox disabled="true" value="{!qbdialer__SeekInitiative__c.qbdialer__Prevent_callbacks__c}" id="prevent_callbacks" />
                        <label for="SeekInitiative:editPage:prevent_callbacks">Prevent users from receiving callbacks while dialing in this list</label>
                        <br />
                        <br />
                        <div><strong>Who can call back:</strong></div>
                        <div>
                            <apex:selectRadio disabled="true" id="call_backs" layout="pageDirection" value="{!qbdialer__SeekInitiative__c.qbdialer__CallbackPermission__c}" onclick="showCallBackGracePeriod();">
                                <apex:selectOption id="cb_owner" itemValue="owner" itemLabel="Only the owner of the callback"/>
                                <apex:selectOption id="cb_list" itemValue="list" itemLabel="All attendees of this initiative"/>
                                <apex:selectOption id="cb_all" itemValue="all" itemLabel="All users"/>
                            </apex:selectRadio>
                        </div>
                    </div>
                    <!-- 
                    <apex:outputPanel rendered="{!showGracePeriod}"><div class="pbSubbody">
                        <strong>Grace Period:</strong><br/>
                        <apex:outputField value="{!SeekInitiative__c.CallbackGracePeriod__c}"/> minutes
                    </div></apex:outputPanel>
                     -->
                </div>
                <div class="pbSubblock">
                    <apex:actionFunction name="deleteTimeblock" action="{!deleteTimeblock}" oncomplete="/* do not remove */" rerender="timeblock_query_rows,new_timeblock_id">
                        <apex:param name="timeblock_id" value=""/>
                    </apex:actionFunction>
                    <apex:actionFunction name="cloneSeekList" action="{!cloneSeekList}" oncomplete="cloneComplete()" rerender="cloned_id">
                        <apex:param name="new_name" value=""/>
                    </apex:actionFunction>
                    <div class="pbSubheader tertiaryPalette"><h3>Dialing Rules</h3></div>
                    <div style="margin-bottom: 10px;">
                        <apex:outputPanel id="timeblock_queries" style="display:none">
                            <div class="pbBody"><div class="multiuserCalendar dayView">
                                <apex:outputPanel id="timeblock_query_rows"><table class="calendarTable" border="0" cellspacing="0" cellpadding="0" style="width: 300px">
                                    <tr class="even">
                                        <td colspan="8"><apex:outputField value="{!qbdialer__SeekInitiative__c.qbdialer__NoPhoneNumber__c}"/>
                                        <label>Include records without phone numbers</label></td>
                                    </tr>
                                    <tr class="headerRow">
                                        <th class="nameCol">Name</th>
                                        <th class="nameCol">Start Time</th>
                                        <th class="nameCol">End Time</th>
                                        <th>&nbsp;</th>
                                        <apex:repeat value="{!Timeblocks.headers}" var="header">
                                            <th class="nameCol">{!header}</th>
                                        </apex:repeat>
                                    </tr>
                                    <apex:repeat value="{!Timeblocks.queries}" var="tbq">
                                    <tr class="even">
                                        <td style="white-space: nowrap; padding-left: 15px">{!tbq.Name}</td>
                                        <td style="white-space: nowrap; padding-left: 15px; text-align: right">{!tbq.StartTimeDisplay}</td>
                                        <td style="white-space: nowrap; padding-left: 15px; text-align: right">{!tbq.EndTimeDisplay}</td>
                                        <td>&nbsp;</td>
                                        <apex:repeat value="{!tbq.InRange}" var="display">
                                            <td style="background-color:{!IF(display, 'blue', 'white')}">&nbsp;</td>
                                        </apex:repeat>
                                    </tr>
                                    </apex:repeat>
                                </table></apex:outputPanel>
                            </div></div>
                        </apex:outputPanel>
                    </div>
                    <div class="pbBottomButtons">
                        <table><tbody>
                            <tr>
                                <td class="pbTitle">&nbsp;</td>
                                <td class="pbButtonb">
                                    <apex:commandButton action="{!edit}"   value=" Edit "   title=" Edit " rendered="{!ShowEditButton}"/>
                        			<apex:outputPanel rendered="{!can_clone}" >
			                        	<input type="button" class="btn" title=" Clone " value=" Clone " onclick="cloneList()"/>
			                        </apex:outputPanel>
                                    <apex:commandButton rendered="{!ShowEditButton}" action="{!delete}" onclick="return window.confirm('Are you sure?');"   value=" Delete "   title=" Delete "/>
                                </td>
                            </tr>
                        </tbody></table>
                    </div>
                </div>
            </div>
        </apex:form>
        <div class="pbFooter secondaryPalette"><div class="bg"></div></div>
    </div>
</div> 
</apex:page>